/*
 * Uart.h
 *
 *  Created on: May 9, 2018
 *      Author: M
 */
#ifdef __cplusplus
 extern "C" {
#endif

#ifndef Uart_H_
#define Uart_H_



#include "stm32f4xx_usart.h"
#include "stm32f4xx_gpio.h"
#include "stm32f4xx_rcc.h"
#include "stm32f4xx_tim.h"
#include "stm32f4xx_dma.h"
#include "string.h"

namespace UART {

#define CR 13 // carriage return char
#define LF 10 // linefeed char


typedef struct {
  uint16_t hsync_cnt;   // counter
  uint32_t start_adr;   // start_adres
  uint32_t dma2_cr_reg; // Register constant CR-Register
}UART_t;
UART_t UART;

int write(char *text_out);
int read(char *buf);
int initUART2();

int putchar(char c);
char getchar(void);

void TIM3_IRQHandler(void);
void USART2_IRQHandler(void);
void DMA1_Stream5_IRQHandler(void);

} //namesspace

#endif /* Uart_H_ */

#ifdef __cplusplus
}
#endif
